import{r as x,j as o,E as C}from"./v-react-44nL4J9m.js";import{g as F,S as P,C as S,T as j}from"./index-Dr8pxXRg.js";import{C as y}from"./ChartButtonBox-DbfVaG1-.js";import"./v-lodash-Dtxmn3UF.js";import"./v-echarts-BO3Y36ks.js";import"./v-prosemirror-Cp-VVqB4.js";import"./v-@sentry-DA5FXZpo.js";function E(t){var n,r,a=t.length;if(a===1)n=0,r=t[0][1];else{for(var l=0,c=0,h=0,u=0,i,m,f,d=0;d<a;d++)i=t[d],m=i[0],f=i[1],l+=m,c+=f,h+=m*m,u+=m*f;n=(a*u-l*c)/(a*h-l*l),r=c/a-n*l/a}return{m:n,b:r}}function L(t){return function(n){return t.b+t.m*n}}function M(t){if(t.length===0)throw new Error("min requires at least one data point");for(var n=t[0],r=1;r<t.length;r++)t[r]<n&&(n=t[r]);return n}function q(t){if(t.length===0)throw new Error("max requires at least one data point");for(var n=t[0],r=1;r<t.length;r++)t[r]>n&&(n=t[r]);return n}function A({playerData:t=[]}){const[n,r]=x.useState({minGamesPlayed:0}),[a,l]=x.useState(!1),c=e=>{var s;return a?e.hltvTwoPointO:(s=e.stats)==null?void 0:s.rating},u=t.filter(e=>{var s;return((s=e.stats)==null?void 0:s.gameCount)>=n.minGamesPlayed}).map(e=>[c(e),e.mmr,e.tier.name,e.name,e]),i=F(t??[]),m=t.map(e=>[c(e),e.mmr]),f=E(m),d=L(f),w=a?M(t.map(e=>e.hltvTwoPointO)):Number((i==null?void 0:i.lowest.rating).toFixed(2)),R=a?q(t.map(e=>e.hltvTwoPointO)):Number((i==null?void 0:i.highest.rating).toFixed(2)),p=i.highest.rating?R+.05:0,v=i.lowest.rating?w-.05:0,g=e=>({symbolsize:60,datasetIndex:e,type:"scatter",symbolSize:8,select:{selectedMode:"multiple"},emphasis:{focus:"series",label:{color:"#FFFFFF",show:!0,formatter:function(s){return s.data[3]},position:"top"}},tooltip:{show:!0,triggerOn:"none",showContent:!0,alwaysShowContent:!0,enterable:!0,renderMode:"html",backgroundColor:"rgba(10,10,10,1)",position:["11%","11%"],formatter:function(s){return`<b>${s.data[3]}</b><br />${a?"HLTV Rating":"Rating"}: ${s.data[0].toFixed(2)}<br />MMR: ${s.data[1]}`}}}),b={backgroundColor:"#090917",title:{text:"MMR and Rating per Tier",textStyle:{color:"#FFFFFF"},left:"center"},legend:{data:["Recruit","Prospect","Contender","Challenger","Elite","Premier","Linear Regression"],top:30,textStyle:{color:"#fff",fontSize:12},inactiveColor:"gray"},toolbox:{feature:{saveAsImage:{title:"Save Image",show:!0,type:"png"}}},dataset:[{source:u??[]},{transform:{type:"filter",config:{dimension:2,eq:"Recruit"}}},{transform:{type:"filter",config:{dimension:2,eq:"Prospect"}}},{transform:{type:"filter",config:{dimension:2,eq:"Contender"}}},{transform:{type:"filter",config:{dimension:2,eq:"Challenger"}}},{transform:{type:"filter",config:{dimension:2,eq:"Elite"}}},{transform:{type:"filter",config:{dimension:2,eq:"Premier"}}}],dataZoom:[{type:"inside"},{type:"slider",showDataShadow:!0,handleSize:"100%"},{type:"inside",orient:"vertical"},{type:"slider",orient:"vertical",showDataShadow:!0,handleSize:"100%"}],xAxis:{max:p,min:v,splitLine:{lineStyle:{type:"dashed",color:"#383838"}},axisLabel:{formatter:function(e){return e.toFixed(2)}}},yAxis:{splitLine:{lineStyle:{type:"dashed",color:"#383838"}}},tooltip:{show:!1,trigger:"item",label:{formatter:function(e){return`${e.data[3]} ${e.data[2]}`}}},series:[{name:"Recruit",...g(1)},{name:"Prospect",...g(2)},{name:"Contender",...g(3)},{name:"Challenger",...g(4)},{name:"Elite",...g(5)},{name:"Premier",...g(6)},{name:"Linear Regression",color:"purple",symbolSize:4,animationEasing:"cubicIn",lineStyle:{type:"dashed"},data:[[v,d(v)],[p,d(p)]],type:"line"}]};return o.jsxs(o.Fragment,{children:[o.jsx(P,{children:o.jsx(C,{option:b,className:"w-full pr-4",style:{height:600}})}),o.jsx("div",{className:"m-2",children:o.jsxs(S,{children:[o.jsx(y,{children:o.jsxs("div",{className:"flex flex-row",children:[o.jsx(j,{checked:a,onChange:()=>l(!a)}),"HLTV Rating"]})}),o.jsxs(y,{children:[o.jsxs("label",{htmlFor:"customRange1",className:"flex text-neutral-700 dark:text-neutral-200",children:["Minimum Games Played (",n.minGamesPlayed,")"]}),o.jsx("input",{type:"range",min:"0",max:"12",step:"1",className:"transparent h-1.5 w-full cursor-pointer appearance-none rounded-lg border-transparent bg-neutral-200",id:"customRange1",value:n.minGamesPlayed,onChange:e=>r({...n,minGamesPlayed:Number(e.target.value)})})]})]})})]})}export{A as CartesianCompare};
